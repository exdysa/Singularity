(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4143:function(e,t,n){Promise.resolve().then(n.bind(n,7848))},7848:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return tt}});var l,r,a=n(7437),s=n(2265),o=n(9655),i=n(970),c=n(202),d=n(5087),u=n(5849),h=n(1657);let m=e=>{let{category:t,items:n,setActiveItem:l,onAddNode:r,expandedItems:i,setExpandedItems:c}=e,d=(0,s.useCallback)((e,t)=>{e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"},[]),x=e=>{l(n.widgets[e])},p=()=>{l(null)};return(0,a.jsxs)(o.qu,{children:[(0,a.jsx)(o.xx,{className:"text-xs text-left py-0 my-0 px-1 w-full",children:t}),(0,a.jsx)(o.dp,{className:"p-2",children:(0,a.jsxs)("div",{className:"flex flex-col items-baseline justify-start",children:[Object.entries(n.subcategories).map(e=>{let[t,n]=e;return(0,a.jsx)(m,{category:t,items:n,setActiveItem:l,onAddNode:r,expandedItems:i,setExpandedItems:c},t)}),Object.values(n.subcategories).length>0&&n.widgets.length>0&&(0,a.jsx)(o.uP,{}),n.widgets.map((e,t)=>(0,a.jsx)("button",{className:(0,h.cn)("cursor-click shadow-sm -mt-px w-full text-left","relative z-0 hover:z-50 px-1 py-0.7 rounded border border-neutral-600 transition duration-200 hover:border-white bg-background text-neutral-200 text-xs"),onClick:t=>{t.preventDefault(),r({widget:e})},draggable:!0,onDragStart:t=>d(t,e),onMouseEnter:()=>x(t),onMouseLeave:p,children:(0,u.Z)(e.name)},e.name))]})})]})};var x=s.memo(m),p=n(2177),f=s.memo(e=>{let{setActiveItem:t}=e,{widgets:n,onAddNode:l}=(0,i.q)((0,d.N)(e=>({widgets:e.widgets,onAddNode:e.onAddNode}))),[r,u]=(0,s.useState)({}),[h,m]=(0,s.useState)(""),[f,g]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e={},t=(t,n)=>{let l=e;t.forEach((e,r)=>{l[e]||(l[e]={widgets:[],subcategories:{}}),r===t.length-1&&l[e].widgets.push(n),l=l[e].subcategories})},l=Object.values(n);for(let e of(h&&(l=l.filter(e=>e.name.toLowerCase().includes(h.toLowerCase()))),l))t(e.category.split("/"),e);u(e)},[n,h]);let v=(0,s.useCallback)(e=>{m(e.target.value)},[]);return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"flex px-2",children:(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("input",{name:"search",type:"text",className:"px-9 flex h-6 w-full rounded-md border border-input bg-transparent text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Search...",onChange:v,onKeyDown:e=>e.stopPropagation()}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2   flex items-center   pointer-events-none",children:(0,a.jsx)(p._Ve,{className:"w-4 h-4 text-gray-400"})})]})}),(0,a.jsx)(o.uP,{}),(0,a.jsx)("div",{className:"flex flex-col",children:Object.entries(r).map((e,n)=>{let[r,s]=e;return(0,a.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.01*n,duration:.2},children:(0,a.jsx)(x,{category:r,items:s,setActiveItem:t,onAddNode:l,expandedItems:f,setExpandedItems:g},r)},r)})})]})}),g=n(7014),v=n(8325);let w=e=>{let{isRequired:t,position:n}=e;return(0,a.jsx)("div",{className:"mt-1.5 react-flow__handle ".concat(t?"bg-primary":"bg-border"," ").concat("left"===n?"mr-2":"ml-2"),style:{width:"12px",height:"12px",position:"absolute",[n]:-3}})};var b=s.memo(e=>{let{data:t}=e,{outputs:n,params:l,inputs:r}=(0,s.useMemo)(()=>{let e=t.output.map(e=>({name:e,type:e})),n=[],l=[];return Object.entries(t.input.required).forEach(e=>{let[t,r]=e;g.lj.isParameterOrList(r)?n.push({name:t,type:r[0],input:r}):l.push({name:t,type:r[0]})}),{outputs:e,params:n,inputs:l}},[t]);return(0,a.jsx)(c.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:300,damping:20,duration:.15},className:"w-[350px]",children:(0,a.jsxs)(v.Z,{title:t.name,active:!1,preview:!0,children:[(0,a.jsxs)("div",{className:"flex w-full items-stretch justify-between space-x-6",children:[(0,a.jsx)("div",{className:"flex-1",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(w,{position:"left",isRequired:1}),(0,a.jsx)("span",{className:"text-sm",children:(0,u.Z)(e.name)})]},t))}),(0,a.jsx)("div",{className:"flex-1 text-right",children:n.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-end",children:[(0,a.jsx)("span",{className:"text-sm",children:(0,u.Z)(e.name)}),(0,a.jsx)(w,{position:"right",isRequired:1})]},t))})]}),(0,a.jsx)("div",{className:"mt-4",children:l.map((e,t)=>(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"text-sm",children:(0,u.Z)(e.name)})},t))})]})})});function j(e){let{children:t}=e,[n,l]=(0,s.useState)(null),[r,i]=(0,s.useState)({x:"right",y:"bottom"});return(0,s.useEffect)(()=>{let e=e=>{e.clientX>2*window.innerWidth/3?i({x:"left",y:"top"}):i({x:"right",y:"bottom"})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.xV,{children:[(0,a.jsx)(o.W4,{children:t}),(0,a.jsx)(o.h_,{className:"overflow-scroll",children:(0,a.jsx)(f,{setActiveItem:l})})]}),null!==n&&(0,a.jsx)("div",{className:"fixed z-[60] ".concat(r.x,"-0 ").concat(r.y,"-0 bg-muted/50 p-8 rounded-lg border backdrop-blur-sm"),children:(0,a.jsx)(b,{data:n})})]})}var y=n(5400),C=n(2936),k=n(5754),N=n(2110),E=n(4991),S=n(1266),D=n(4104),T=n(1260),_=n(8687),z=n(2338),M=(n(7881),n(2642)),R=n(9586),L=n(9143),O=n(9310),A=n(1780);let[Z,I]=(0,D.b)("Tooltip",[z.D7]),P=(0,z.D7)(),V="tooltip.open",[$,F]=Z("TooltipProvider"),H="Tooltip",[W,K]=Z(H),q="TooltipTrigger",B=(0,s.forwardRef)((e,t)=>{let{__scopeTooltip:n,...l}=e,r=K(q,n),a=F(q,n),o=P(n),i=(0,s.useRef)(null),c=(0,S.e)(t,i,r.onTriggerChange),d=(0,s.useRef)(!1),u=(0,s.useRef)(!1),h=(0,s.useCallback)(()=>d.current=!1,[]);return(0,s.useEffect)(()=>()=>document.removeEventListener("pointerup",h),[h]),(0,s.createElement)(z.ee,(0,N.Z)({asChild:!0},o),(0,s.createElement)(R.WV.button,(0,N.Z)({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},l,{ref:c,onPointerMove:(0,E.M)(e.onPointerMove,e=>{"touch"===e.pointerType||u.current||a.isPointerInTransitRef.current||(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:(0,E.M)(e.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:(0,E.M)(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:(0,E.M)(e.onFocus,()=>{d.current||r.onOpen()}),onBlur:(0,E.M)(e.onBlur,r.onClose),onClick:(0,E.M)(e.onClick,r.onClose)})))}),[U,G]=Z("TooltipPortal",{forceMount:void 0}),X="TooltipContent",Y=(0,s.forwardRef)((e,t)=>{let n=G(X,e.__scopeTooltip),{forceMount:l=n.forceMount,side:r="top",...a}=e,o=K(X,e.__scopeTooltip);return(0,s.createElement)(M.z,{present:l||o.open},o.disableHoverableContent?(0,s.createElement)(et,(0,N.Z)({side:r},a,{ref:t})):(0,s.createElement)(J,(0,N.Z)({side:r},a,{ref:t})))}),J=(0,s.forwardRef)((e,t)=>{let n=K(X,e.__scopeTooltip),l=F(X,e.__scopeTooltip),r=(0,s.useRef)(null),a=(0,S.e)(t,r),[o,i]=(0,s.useState)(null),{trigger:c,onClose:d}=n,u=r.current,{onPointerInTransitChange:h}=l,m=(0,s.useCallback)(()=>{i(null),h(!1)},[h]),x=(0,s.useCallback)((e,t)=>{let n=e.currentTarget,l={x:e.clientX,y:e.clientY},r=function(e,t){let n=Math.abs(t.top-e.y),l=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,l,r,a)){case a:return"left";case r:return"right";case n:return"top";case l:return"bottom";default:throw Error("unreachable")}}(l,n.getBoundingClientRect());i(function(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();let t=[];for(let n=0;n<e.length;n++){let l=e[n];for(;t.length>=2;){let e=t[t.length-1],n=t[t.length-2];if((e.x-n.x)*(l.y-n.y)>=(e.y-n.y)*(l.x-n.x))t.pop();else break}t.push(l)}t.pop();let n=[];for(let t=e.length-1;t>=0;t--){let l=e[t];for(;n.length>=2;){let e=n[n.length-1],t=n[n.length-2];if((e.x-t.x)*(l.y-t.y)>=(e.y-t.y)*(l.x-t.x))n.pop();else break}n.push(l)}return(n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y)?t:t.concat(n)}(t)}([...function(e,t,n=5){let l=[];switch(t){case"top":l.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":l.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":l.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":l.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return l}(l,r),...function(e){let{top:t,right:n,bottom:l,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:l},{x:r,y:l}]}(t.getBoundingClientRect())])),h(!0)},[h]);return(0,s.useEffect)(()=>()=>m(),[m]),(0,s.useEffect)(()=>{if(c&&u){let e=e=>x(e,u),t=e=>x(e,c);return c.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}},[c,u,x,m]),(0,s.useEffect)(()=>{if(o){let e=e=>{let t=e.target,n={x:e.clientX,y:e.clientY},l=(null==c?void 0:c.contains(t))||(null==u?void 0:u.contains(t)),r=!function(e,t){let{x:n,y:l}=e,r=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let s=t[e].x,o=t[e].y,i=t[a].x,c=t[a].y;o>l!=c>l&&n<(i-s)*(l-o)/(c-o)+s&&(r=!r)}return r}(n,o);l?m():r&&(m(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,u,o,d,m]),(0,s.createElement)(et,(0,N.Z)({},e,{ref:a}))}),[Q,ee]=Z(H,{isInside:!1}),et=(0,s.forwardRef)((e,t)=>{let{__scopeTooltip:n,children:l,"aria-label":r,onEscapeKeyDown:a,onPointerDownOutside:o,...i}=e,c=K(X,n),d=P(n),{onClose:u}=c;return(0,s.useEffect)(()=>(document.addEventListener(V,u),()=>document.removeEventListener(V,u)),[u]),(0,s.useEffect)(()=>{if(c.trigger){let e=e=>{let t=e.target;null!=t&&t.contains(c.trigger)&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,u]),(0,s.createElement)(T.XB,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:u},(0,s.createElement)(z.VY,(0,N.Z)({"data-state":c.stateAttribute},d,i,{ref:t,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),(0,s.createElement)(L.A4,null,l),(0,s.createElement)(Q,{scope:n,isInside:!0},(0,s.createElement)(A.f,{id:c.contentId,role:"tooltip"},r||l))))}),en=e=>{let{__scopeTooltip:t,delayDuration:n=700,skipDelayDuration:l=300,disableHoverableContent:r=!1,children:a}=e,[o,i]=(0,s.useState)(!0),c=(0,s.useRef)(!1),d=(0,s.useRef)(0);return(0,s.useEffect)(()=>{let e=d.current;return()=>window.clearTimeout(e)},[]),(0,s.createElement)($,{scope:t,isOpenDelayed:o,delayDuration:n,onOpen:(0,s.useCallback)(()=>{window.clearTimeout(d.current),i(!1)},[]),onClose:(0,s.useCallback)(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>i(!0),l)},[l]),isPointerInTransitRef:c,onPointerInTransitChange:(0,s.useCallback)(e=>{c.current=e},[]),disableHoverableContent:r},a)},el=e=>{let{__scopeTooltip:t,children:n,open:l,defaultOpen:r=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:i}=e,c=F(H,e.__scopeTooltip),d=P(t),[u,h]=(0,s.useState)(null),m=(0,_.M)(),x=(0,s.useRef)(0),p=null!=o?o:c.disableHoverableContent,f=null!=i?i:c.delayDuration,g=(0,s.useRef)(!1),[v=!1,w]=(0,O.T)({prop:l,defaultProp:r,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(V))):c.onClose(),null==a||a(e)}}),b=(0,s.useMemo)(()=>v?g.current?"delayed-open":"instant-open":"closed",[v]),j=(0,s.useCallback)(()=>{window.clearTimeout(x.current),g.current=!1,w(!0)},[w]),y=(0,s.useCallback)(()=>{window.clearTimeout(x.current),w(!1)},[w]),C=(0,s.useCallback)(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{g.current=!0,w(!0)},f)},[f,w]);return(0,s.useEffect)(()=>()=>window.clearTimeout(x.current),[]),(0,s.createElement)(z.fC,d,(0,s.createElement)(W,{scope:t,contentId:m,open:v,stateAttribute:b,trigger:u,onTriggerChange:h,onTriggerEnter:(0,s.useCallback)(()=>{c.isOpenDelayed?C():j()},[c.isOpenDelayed,C,j]),onTriggerLeave:(0,s.useCallback)(()=>{p?y():window.clearTimeout(x.current)},[y,p]),onOpen:j,onClose:y,disableHoverableContent:p},n))},er=s.forwardRef((e,t)=>{let{className:n,sideOffset:l=4,...r}=e;return(0,a.jsx)(Y,{ref:t,sideOffset:l,className:(0,h.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})});er.displayName=Y.displayName;var ea=n(9326),es=n(5179);let eo="horizontal",ei=["horizontal","vertical"],ec=(0,s.forwardRef)((e,t)=>{let{decorative:n,orientation:l=eo,...r}=e,a=ed(l)?l:eo;return(0,s.createElement)(R.WV.div,(0,N.Z)({"data-orientation":a},n?{role:"none"}:{"aria-orientation":"vertical"===a?a:void 0,role:"separator"},r,{ref:t}))});function ed(e){return ei.includes(e)}ec.propTypes={orientation(e,t,n){let l=e[t],r=String(l);return l&&!ed(l)?Error(`Invalid prop \`orientation\` of value \`${r}\` supplied to \`${n}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${eo}\`.`):null}};let eu=s.forwardRef((e,t)=>{let{className:n,orientation:l="horizontal",decorative:r=!0,...s}=e;return(0,a.jsx)(ec,{ref:t,decorative:r,orientation:l,className:(0,h.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",n),...s})});eu.displayName=ec.displayName;var eh=s.memo(e=>{let{item:t,index:n,handleRename:l,handleUpdate:r,handleDelete:o,handleLoad:i}=e,[c,d]=(0,s.useState)(!1),u=(0,s.useCallback)(e=>{d(!1);let n=e.target.value;n&&l(t.id,n)},[l,t.id]),h=(0,s.useCallback)(()=>{i(t.graph,t.title)},[i,t.graph,t.title]),m=(0,s.useCallback)(()=>{d(!c)},[c]),x=(0,s.useCallback)(()=>{r(t.id,t.title)},[r,t.id,t.title]),f=(0,s.useCallback)(()=>{(0,g.Cq)(t.graph,t.title)},[t.graph,t.title]),v=(0,s.useCallback)(()=>{o(t.id,t.title)},[o,t.id,t.title]),w=(0,s.useCallback)(()=>c?(0,a.jsx)(es.I,{defaultValue:t.title,onBlur:u,onKeyDown:e=>["Enter","Escape"].includes(e.key)&&e.target.blur()}):(0,a.jsx)("a",{className:"flex",title:"Load",onClick:h,children:t.title}),[c,t.title,n,u,h]);return(0,a.jsx)(en,{delayDuration:0,children:(0,a.jsx)("ul",{className:"list-none p-0 m-0",children:(0,a.jsx)("li",{className:"border-b border-gray-200 last:border-b-0",children:(0,a.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)("a",{title:"Load",onClick:h,className:"flex items-center space-x-2 my-4",children:(0,a.jsx)("span",{children:w()})})}),(0,a.jsxs)("div",{className:"flex justify-end items-center",children:[(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:m,children:(0,a.jsx)(p.SQj,{})})}),(0,a.jsx)(er,{children:"Rename workflow"})]}),(0,a.jsx)(eu,{orientation:"vertical",decorative:!0}),(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:x,children:(0,a.jsx)(p.oqE,{})})}),(0,a.jsx)(er,{children:"Overwrite with current"})]}),(0,a.jsx)(eu,{orientation:"vertical",decorative:!0}),(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:f,children:(0,a.jsx)(p._8t,{})})}),(0,a.jsx)(er,{children:"Download to disk"})]}),(0,a.jsx)(eu,{orientation:"vertical",decorative:!0}),(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:v,children:(0,a.jsx)(p.ypG,{})})}),(0,a.jsx)(er,{children:"Delete workflow"})]})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.S7f,{}),(0,a.jsx)("span",{children:Object.keys(t.graph.data).length})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.qDj,{}),(0,a.jsx)("span",{children:t.graph.connections.length})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.T39,{}),(0,a.jsx)("span",{children:(()=>{let e=new Date(t.time);return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)})()})]})]})})]})},t.id)})})}),em=n(6288),ex=n(843);/**
 * @license lucide-react v0.352.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let ep=(0,ex.Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),ef=(0,ex.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),eg=(0,ex.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function ev(e){let{onUpload:t}=e,[n,l]=(0,s.useState)(null),[r,o]=(0,s.useState)(!1),[i,c]=(0,s.useState)(""),{dragOver:d,setDragOver:u,onDragOver:m,onDragLeave:x}=function(){let[e,t]=(0,s.useState)(!1),[n,l]=(0,s.useState)("");return{dragOver:e,setDragOver:t,onDragOver:e=>{e.preventDefault(),t(!0)},onDragLeave:()=>t(!1),fileDropError:n,setFileDropError:l}}(),f=()=>{n&&(o(!0),setTimeout(()=>{o(!1)},Math.max(1e3,Math.min(n.size/750,4e3))))};return(0,s.useEffect)(()=>{n&&!r&&f()},[n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border-b",children:[(0,a.jsx)("label",{htmlFor:"file",onDragOver:m,onDragLeave:x,onDrop:e=>{e.preventDefault(),u(!1);let n=e.dataTransfer.files[0];return n?"application/json"!==n.type?c("Invalid file type! Only JSON files are accepted."):void(l(n),c(""),t(n)):c("No file selected.")},className:(0,h.cn)("px-4 py-2 border-[1.5px] border-dashed dark:border-neutral-700 m-4 rounded-lg flex flex-col justify-start items-center hover:cursor-pointer",d&&"border-blue-600 bg-blue-50"),children:(0,a.jsxs)("div",{className:"flex flex-col p-4 justify-start items-center text-center",children:[(0,a.jsx)(p.rG2,{className:(0,h.cn)("h-5 w-5 text-neutral-600 my-4",d&&"text-blue-500")}),(0,a.jsx)("p",{className:"font-semibold",children:"Load a workspace or drag & drop it here"}),(0,a.jsx)("p",{className:"text-neutral-500 text-sm",children:"Only JSON files."})]})}),(0,a.jsx)("input",{type:"file",name:"file",id:"file",className:"hidden",onChange:e=>{let n=e.target.files?e.target.files[0]:null;return n?"application/json"!==n.type?c("Invalid file type! Only JSON files are accepted."):void(l(n),c(""),t(n)):c("No file selected.")},accept:"application/json"})]}),n&&(0,a.jsx)("div",{className:"w-full px-4 py-2 gap-2 flex flex-col justify-start items-center border-t dark:border-neutral-700 overflow-auto",children:(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center border dark:border-neutral-700 rounded-lg px-2 py-1 w-full group",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-start items-center gap-2",children:[(0,a.jsx)(ep,{className:"h-5 w-5 text-neutral-500"}),(0,a.jsx)(en,{children:(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)("p",{className:"truncate hover:cursor-help",children:n.name})}),(0,a.jsx)(er,{children:(0,a.jsx)("p",{children:n.name})})]})}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:(0,h.t)(n.size)})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-end items-center gap-2",children:[r?(0,a.jsx)(ef,{className:"h-4 w-4 animate-spin text-neutral-500"}):(0,a.jsxs)("div",{className:"flex flex-row justify-start items-center text-xs rounded-full px-2 py-[0.5px] gap-1",children:[(0,a.jsx)("div",{className:"h-2 w-2 bg-green-400 rounded-full"}),(0,a.jsx)("p",{className:"text-neutral-500",children:"Uploaded"})]}),(0,a.jsx)("button",{className:"text-neutral-400 p-1 rounded-lg hover:text-black transition-all hover:cursor-pointer",onClick:()=>{l(null)},children:(0,a.jsx)(eg,{className:"h-4 w-4"})})]})]})}),i&&(0,a.jsxs)("div",{className:"bg-orange-50 py-1 mx-2 rounded-lg text-center my-2 border border-orange-200 flex flex-row justify-center items-center gap-2",children:[(0,a.jsx)(ep,{className:"h-4 w-4 text-orange-400"}),(0,a.jsx)("p",{className:"text-orange-400 text-sm font-medium",children:i})]})]})}var ew=n(9842);let eb=s.memo(()=>{let[e,t]=(0,s.useState)(),[n,l]=(0,s.useState)(),[r,o]=(0,s.useState)(0),{onLoadWorkflow:c,onDownloadWorkflow:u,onSaveLocalWorkFlow:h,onUpdateLocalWorkFlowGraph:m,onUpdateLocalWorkFlowTitle:x}=(0,i.q)((0,d.N)(e=>({onLoadWorkflow:e.onLoadWorkflow,onDownloadWorkflow:e.onDownloadWorkflow,onSaveLocalWorkFlow:e.onSaveLocalWorkFlow,onUpdateLocalWorkFlowGraph:e.onUpdateLocalWorkFlowGraph,onUpdateLocalWorkFlowTitle:e.onUpdateLocalWorkFlowTitle}))),p=(0,s.useCallback)(()=>{h(e),o(r+1),em.Am.success("Success! ".concat(null!=e?e:"Your workflow"," have been saved."))},[r,h,e]),f=(0,s.useCallback)((e,t)=>{(0,g.Sf)(e),o(r+1),em.Am.info("".concat(t," has been deleted."))},[r]),v=(0,s.useCallback)((e,t)=>{e?(c(e),o(r+1),em.Am.success("Success! ".concat(t," have been loaded."))):em.Am.error("Error! Invalid workflow data.")},[r,c]),w=(0,s.useCallback)((e,t)=>{m(e),o(r+1),em.Am.success("Success! ".concat(t," have been update."))},[r,m]),b=(0,s.useCallback)((e,t)=>{x(e,t),o(r+1),em.Am.success("Success! the workflow have been renamed to ".concat(t," ."))},[r,x]);(0,s.useCallback)(()=>{(0,g.W)(),c(ea.Z),o(r+1),em.Am.success("Success! load default workflow.")},[r,c]);let j=(0,s.useCallback)(e=>{(0,g.Sk)(e,e=>{e?(c(e),em.Am.success("Success! the workflow have been loaded.")):em.Am.error("Error! Invalid workflow file.")})},[r,c]);return(0,s.useEffect)(()=>{try{let e=(0,g.qW)();Array.isArray(e)?l(e.sort((e,t)=>t.time-e.time)):console.error("Invalid local workflows data")}catch(e){console.error("Error retrieving local workflows:",e)}},[r]),(0,s.useCallback)((e,t)=>(0,a.jsx)(eh,{item:e,index:t,handleLoad:v,handleUpdate:w,handleDelete:f,handleRename:b}),[f,v,b,w]),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(k.z,{className:"bg-border hover:bg-black text-white mt-3 mx-5",onClick:p,children:"Save"}),(0,a.jsx)(ev,{onUpload:j}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ew._,{children:"Local Workflows"}),null==n?void 0:n.map((e,t)=>(0,a.jsx)("li",{className:"border-b border-gray-200 last:border-b-0 list-none",children:(0,a.jsx)(eh,{item:e,index:t,handleLoad:v,handleUpdate:w,handleDelete:f,handleRename:b})},e.id))]})]})}),ej=e=>{let{setOpen:t}=e;return(0,a.jsxs)(C.PK,{children:[(0,a.jsx)(C.t9,{asChild:!0}),(0,a.jsx)(C.cZ,{className:"fixed inset-0 z-50 flex flex-col items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-black p-6 rounded-lg shadow-lg",children:[(0,a.jsx)(C.$N,{className:"text-lg font-bold",children:"Are you sure?"}),(0,a.jsx)(C.Be,{className:"text-sm",children:"This action will clear the graph. Do you want to proceed?"}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,a.jsx)(C.GG,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>t(!1),variant:"outline",children:"Cancel"})}),(0,a.jsx)(k.z,{onClick:()=>{t(!1)},children:"Confirm"})]})]})})]})};var ey=n(5509),eC=n(2558);let ek=e=>{let{open:t,setOpen:n}=e,{onUpdateFrontend:l,edgeType:r,onEdgesType:s}=(0,i.q)((0,d.N)(e=>({onUpdateFrontend:e.onUpdateFrontend,edgeType:e.edgeType,onEdgesType:e.onEdgesType}))),o=[{label:"Client Frontend",item:e=>(0,a.jsxs)(ey.Ph,{onValueChange:async()=>l(),children:[(0,a.jsx)(ey.i4,{className:"w-32",children:(0,a.jsx)(ey.ki,{placeholder:"sabre"})}),(0,a.jsx)(ey.Bw,{children:e.map(e=>(0,a.jsx)(ey.Ql,{value:e,children:e},e))})]}),options:["classic","sabre"]},{label:"Edge Type",item:e=>(0,a.jsxs)(ey.Ph,{value:r.name,onValueChange:e=>s(eC.v.find(t=>t.name===e)),children:[(0,a.jsx)(ey.i4,{className:"w-32",children:(0,a.jsx)(ey.ki,{placeholder:(0,a.jsxs)("div",{className:"flex flex-row justify-start gap-2 items-center w-full",children:[r.icon,(0,u.Z)(r.name)]})})}),(0,a.jsx)(ey.Bw,{className:"w-full",children:e.map(e=>(0,a.jsx)(ey.Ql,{className:"w-full",value:e.name,children:(0,a.jsxs)("div",{className:"flex flex-row justify-start gap-2 items-center w-full",children:[e.icon,(0,u.Z)(e.name)]})},e.name))})]}),options:eC.v}];return(0,a.jsx)(C.PK,{children:(0,a.jsx)(C.cZ,{className:"absolute inset-0 w-96 h-52 p-4 mx-auto my-auto bg-black rounded-[12px]",children:(0,a.jsxs)("div",{className:"w-full h-full bg-black p-1 shadow-lg relative",children:[(0,a.jsx)(C.$N,{className:"text-lg font-bold mt-0.5 mr-10",children:"Settings"}),(0,a.jsx)(C.GG,{asChild:!0,children:(0,a.jsx)(k.z,{className:"absolute top-0 right-2 p-1 bg-transparent hover:bg-transparent border-none shadow-none",onClick:()=>n(!1),variant:"outline",children:(0,a.jsx)(p.Pxu,{})})}),(0,a.jsx)("div",{className:"flex flex-col gap-2 mt-4",children:o.map(e=>(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center gap-1",children:[(0,a.jsx)("label",{className:"text-sm font-semibold",children:e.label}),e.item(e.options)]},e.label))})]})})})},eN=e=>{let{content:t,children:n}=e;return(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:n}),(0,a.jsx)(er,{side:"left",className:"text-xs",children:t})]})},eE=()=>{let[e,t]=(0,s.useState)(!1),[n,l]=(0,s.useState)(0),{onSubmit:r,queue:o,onDeleteFromQueue:c,promptError:u,onEdgesAnimate:m,expanded:x,onExpand:f}=(0,i.q)((0,d.N)(e=>({onSubmit:e.onSubmit,queue:e.queue,onDeleteFromQueue:e.onDeleteFromQueue,promptError:e.promptError,onEdgesAnimate:e.onEdgesAnimate,onExpand:e.onExpand,expanded:e.expanded})));(0,s.useEffect)(()=>{void 0!==u&&em.Am.error(u)},[u,n]),(0,s.useEffect)(()=>{m(o.length>0)},[o,m]);let g=(0,s.useCallback)(()=>{t(!0),r(),l(e=>e+1)},[r]);return o.length,(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(k.z,{className:(0,h.cn)("relative h-12 w-12 rounded-3xl shadow-lg bg-gradient-to-b text-white dark:text-black dark:from-white dark:to-blue-50 ring-2 ring-blue-50 ring-opacity-60","from-slate-800 to-slate-700 ring-slate-400","hover:rounded-lg transition-all duration-200"),onClick:g,children:(0,a.jsx)(p.o1U,{})})}),(0,a.jsx)(er,{side:"left",className:"text-xs bg-white text-black",children:"Queue prompt"})]})};var eS=s.memo(()=>{let[e,t]=(0,s.useState)(!1),[n,l]=(0,s.useState)(!1),[r,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),{expanded:u,onExpand:h}=(0,i.q)(e=>({expanded:e.expanded,onExpand:e.onExpand})),m=()=>{l(!n),h()};return(0,a.jsx)(en,{delayDuration:0,children:(0,a.jsxs)("div",{className:"fixed right-4 top-4 flex flex-col gap-3 m-2",children:[(0,a.jsx)(eE,{}),(0,a.jsxs)(y.yo,{modal:!0,open:e,onOpenChange:t,children:[(0,a.jsx)(eN,{content:"Save/load workflows",children:(0,a.jsx)(y.aM,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>t(!e),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,a.jsx)(p.otr,{})})})}),(0,a.jsx)(y.ue,{side:"left",className:"overflow-y-scroll",children:(0,a.jsx)(eb,{})})]}),(0,a.jsx)(eN,{content:"Recalculate node positions",children:(0,a.jsx)(k.z,{onClick:()=>{},className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,a.jsx)(p.tPC,{})})}),(0,a.jsx)(eN,{content:"Toggle parameter dropdowns",children:(0,a.jsx)(k.z,{onClick:()=>m(),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:n?(0,a.jsx)(p.hNW,{}):(0,a.jsx)(p.RgI,{})})}),(0,a.jsxs)(C.Vq,{open:r,onOpenChange:o,children:[(0,a.jsx)(eN,{content:"Clear graph",children:(0,a.jsx)(C.hg,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>o(!0),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,a.jsx)(p.XHJ,{})})})}),(0,a.jsx)(ej,{setOpen:o})]}),(0,a.jsxs)(C.Vq,{open:c,onOpenChange:d,children:[(0,a.jsx)(eN,{content:"Settings",children:(0,a.jsx)(C.hg,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>{},className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,a.jsx)(p.UG6,{})})})}),(0,a.jsx)(ek,{open:c,setOpen:d})]})]})})}),eD=n(3606),eT=n(1105),e_=n(2628);function ez({color:e,dimensions:t,lineWidth:n}){return s.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function eM({color:e,radius:t}){return s.createElement("circle",{cx:t,cy:t,r:t,fill:e})}(l=r||(r={})).Lines="lines",l.Dots="dots",l.Cross="cross";let eR={[r.Dots]:"#91919a",[r.Lines]:"#eee",[r.Cross]:"#e2e2e2"},eL={[r.Dots]:1,[r.Lines]:1,[r.Cross]:6},eO=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function eA({id:e,variant:t=r.Dots,gap:n=20,size:l,lineWidth:a=1,offset:o=2,color:i,style:c,className:d}){let u=(0,s.useRef)(null),{transform:h,patternId:m}=(0,eD.oR)(eO,e_.X),x=i||eR[t],p=l||eL[t],f=t===r.Dots,g=t===r.Cross,v=Array.isArray(n)?n:[n,n],w=[v[0]*h[2]||1,v[1]*h[2]||1],b=p*h[2],j=g?[b,b]:w,y=f?[b/o,b/o]:[j[0]/o,j[1]/o];return s.createElement("svg",{className:(0,eT.Z)(["react-flow__background",d]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},s.createElement("pattern",{id:m+e,x:h[0]%w[0],y:h[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${y[0]},-${y[1]})`},f?s.createElement(eM,{color:x,radius:b/o}):s.createElement(ez,{dimensions:j,color:x,lineWidth:a})),s.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${m+e})`}))}eA.displayName="Background";var eZ=(0,s.memo)(eA);function eI(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},s.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function eP(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},s.createElement("path",{d:"M0 0h32v4.2H0z"}))}function eV(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},s.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function e$(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},s.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function eF(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},s.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}let eH=({children:e,className:t,...n})=>s.createElement("button",{type:"button",className:(0,eT.Z)(["react-flow__controls-button",t]),...n},e);eH.displayName="ControlButton";let eW=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),eK=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:l=!0,fitViewOptions:r,onZoomIn:a,onZoomOut:o,onFitView:i,onInteractiveChange:c,className:d,children:u,position:h="bottom-left"})=>{let m=(0,eD.AC)(),[x,p]=(0,s.useState)(!1),{isInteractive:f,minZoomReached:g,maxZoomReached:v}=(0,eD.oR)(eW,e_.X),{zoomIn:w,zoomOut:b,fitView:j}=(0,eD._K)();return((0,s.useEffect)(()=>{p(!0)},[]),x)?s.createElement(eD.s_,{className:(0,eT.Z)(["react-flow__controls",d]),position:h,style:e,"data-testid":"rf__controls"},t&&s.createElement(s.Fragment,null,s.createElement(eH,{onClick:()=>{w(),a?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v},s.createElement(eI,null)),s.createElement(eH,{onClick:()=>{b(),o?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:g},s.createElement(eP,null))),n&&s.createElement(eH,{className:"react-flow__controls-fitview",onClick:()=>{j(r),i?.()},title:"fit view","aria-label":"fit view"},s.createElement(eV,null)),l&&s.createElement(eH,{className:"react-flow__controls-interactive",onClick:()=>{m.setState({nodesDraggable:!f,nodesConnectable:!f,elementsSelectable:!f}),c?.(!f)},title:"toggle interactivity","aria-label":"toggle interactivity"},f?s.createElement(eF,null):s.createElement(e$,null)),u):null};eK.displayName="Controls";var eq=(0,s.memo)(eK),eB=n(653),eU=n(6369),eG=n(3423);let eX=({id:e,x:t,y:n,width:l,height:r,style:a,color:o,strokeColor:i,strokeWidth:c,className:d,borderRadius:u,shapeRendering:h,onClick:m,selected:x})=>{let{background:p,backgroundColor:f}=a||{};return s.createElement("rect",{className:(0,eT.Z)(["react-flow__minimap-node",{selected:x},d]),x:t,y:n,rx:u,ry:u,width:l,height:r,fill:o||p||f,stroke:i,strokeWidth:c,shapeRendering:h,onClick:m?t=>m(t,e):void 0})};eX.displayName="MiniMapNode";var eY=(0,s.memo)(eX);let eJ=e=>e.nodeOrigin,eQ=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),e0=e=>e instanceof Function?e:()=>e;var e1=(0,s.memo)(function({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:l=5,nodeStrokeWidth:r=2,nodeComponent:a=eY,onClick:o}){let i=(0,eD.oR)(eQ,e_.X),c=(0,eD.oR)(eJ),d=e0(t),u=e0(e),h=e0(n),m="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return s.createElement(s.Fragment,null,i.map(e=>{let{x:t,y:n}=(0,eD.VP)(e,c).positionAbsolute;return s.createElement(a,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:h(e),color:d(e),borderRadius:l,strokeColor:u(e),strokeWidth:r,shapeRendering:m,onClick:o,id:e.id})}))});let e2=e=>{let t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?(0,eD.oI)((0,eD.RX)(t,e.nodeOrigin),n):n,rfId:e.rfId}};function e3({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:l="#e2e2e2",nodeClassName:r="",nodeBorderRadius:a=5,nodeStrokeWidth:o=2,nodeComponent:i,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:d="none",maskStrokeWidth:u=1,position:h="bottom-right",onClick:m,onNodeClick:x,pannable:p=!1,zoomable:f=!1,ariaLabel:g="React Flow mini map",inversePan:v=!1,zoomStep:w=10,offsetScale:b=5}){let j=(0,eD.AC)(),y=(0,s.useRef)(null),{boundingRect:C,viewBB:k,rfId:N}=(0,eD.oR)(e2,e_.X),E=e?.width??200,S=e?.height??150,D=Math.max(C.width/E,C.height/S),T=D*E,_=D*S,z=b*D,M=C.x-(T-C.width)/2-z,R=C.y-(_-C.height)/2-z,L=T+2*z,O=_+2*z,A=`react-flow__minimap-desc-${N}`,Z=(0,s.useRef)(0);Z.current=D,(0,s.useEffect)(()=>{if(y.current){let e=(0,eU.Z)(y.current),t=(0,eB.sP)().on("zoom",p?e=>{let{transform:t,d3Selection:n,d3Zoom:l,translateExtent:r,width:a,height:s}=j.getState();if("mousemove"!==e.sourceEvent.type||!n||!l)return;let o=Z.current*Math.max(1,t[2])*(v?-1:1),i={x:t[0]-e.sourceEvent.movementX*o,y:t[1]-e.sourceEvent.movementY*o},c=eB.CR.translate(i.x,i.y).scale(t[2]),d=l.constrain()(c,[[0,0],[a,s]],r);l.transform(n,d)}:null).on("zoom.wheel",f?e=>{let{transform:t,d3Selection:n,d3Zoom:l}=j.getState();if("wheel"!==e.sourceEvent.type||!n||!l)return;let r=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*w,a=t[2]*Math.pow(2,r);l.scaleTo(n,a)}:null);return e.call(t),()=>{e.on("zoom",null)}}},[p,f,v,w]);let I=m?e=>{let t=(0,eG.Z)(e);m(e,{x:t[0],y:t[1]})}:void 0;return s.createElement(eD.s_,{position:h,style:e,className:(0,eT.Z)(["react-flow__minimap",t]),"data-testid":"rf__minimap"},s.createElement("svg",{width:E,height:S,viewBox:`${M} ${R} ${L} ${O}`,role:"img","aria-labelledby":A,ref:y,onClick:I},g&&s.createElement("title",{id:A},g),s.createElement(e1,{onClick:x?(e,t)=>{x(e,j.getState().nodeInternals.get(t))}:void 0,nodeColor:l,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:r,nodeStrokeWidth:o,nodeComponent:i}),s.createElement("path",{className:"react-flow__minimap-mask",d:`M${M-z},${R-z}h${L+2*z}v${O+2*z}h${-L-2*z}z
        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fill:c,fillRule:"evenodd",stroke:d,strokeWidth:u,pointerEvents:"none"})))}e3.displayName="MiniMap";var e4=(0,s.memo)(e3),e5=n(4228),e6=n(1774),e7=n(6042);let e8={maxHistorySize:100,enableShortcuts:!0};var e9=function(){let{maxHistorySize:e=e8.maxHistorySize,enableShortcuts:t=e8.enableShortcuts}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e8,[n,l]=(0,s.useState)([]),[r,a]=(0,s.useState)([]),{setNodes:o,setEdges:i,getNodes:c,getEdges:d}=(0,eD._K)(),u=(0,s.useCallback)(()=>{l(t=>[...t.slice(t.length-e+1,t.length),{nodes:c(),edges:d()}]),a([])},[c,d,e]),h=(0,s.useCallback)(()=>{let e=n[n.length-1];e&&(l(e=>e.slice(0,e.length-1)),a(e=>[...e,{nodes:c(),edges:d()}]),o(e.nodes),i(e.edges))},[o,i,c,d,n]),m=(0,s.useCallback)(()=>{let e=r[r.length-1];e&&(a(e=>e.slice(0,e.length-1)),l(e=>[...e,{nodes:c(),edges:d()}]),o(e.nodes),i(e.edges))},[o,i,c,d,r]);return(0,s.useEffect)(()=>{if(!t)return;let e=e=>{"z"===e.key&&(e.ctrlKey||e.metaKey)&&e.shiftKey?(m(),e.preventDefault()):"z"===e.key&&(e.ctrlKey||e.metaKey)&&(h(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[h,m,t]),{undo:h,redo:m,takeSnapshot:u,canUndo:!n.length,canRedo:!r.length}};n(7333);var te=e=>{let{strength:t=-1e3,distance:n=1e3}=e,l=(0,s.useMemo)(()=>({[e7.f]:e7.Z}),[]),{theme:o}=(0,e6.F)(),c=(0,s.useRef)(null),u=(0,s.useRef)(!0),{takeSnapshot:h}=e9(),[m,x]=(0,s.useState)(null),{nodes:p,edges:f,onInit:v,onNodesChange:w,onEdgesChange:b,onConnect:j,onAddNode:y,onCopyNode:C,onPasteNode:k,onSetNodesGroup:N,onDeleteNode:E,onCreateGroup:S}=(0,i.q)((0,d.N)(e=>({nodes:e.nodes,edges:e.edges,onInit:e.onInit,onNodesChange:(0,e5.Z)(e.onNodesChange,1),onEdgesChange:(0,e5.Z)(e.onEdgesChange,1),onConnect:e.onConnect,onAddNode:e.onAddNode,onCopyNode:e.onCopyNode,onPasteNode:e.onPasteNode,onSetNodesGroup:e.onSetNodesGroup,onDeleteNode:e.onDeleteNode,onCreateGroup:e.onCreateGroup}))),D=(0,s.useCallback)(()=>{u.current=!1},[]),T=(0,s.useCallback)((e,t)=>{h(),u.current=!0,b([{id:e.id,type:"remove"}]),j(t)},[b,j,h]),_=(0,s.useCallback)((e,t)=>{u.current||b([{id:t.id,type:"remove"}]),u.current=!0},[b]),z=(0,s.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),M=(0,s.useCallback)(e=>{e.preventDefault();let t=JSON.parse(e.dataTransfer.getData("application/reactflow"));if(!t)return;let n=(0,g.yY)(e.clientX,e.clientY,c,m);h(),y({widget:t,position:n})},[m,y,h]),R=(0,s.useCallback)((e,t,n)=>{h(),n.length>2||"Group"!==t.data.name||m.getIntersectingNodes(t).filter(e=>"Group"!==e.data.name&&(e.parentNode===t.id||!e.parentNode)).map(e=>e.id)},[m,h]),L=(0,s.useCallback)(()=>{let e=C();navigator.clipboard.writeText(JSON.stringify(e)),console.log("[Copy]",e)},[C]),O=(0,s.useCallback)(async()=>{try{let e=await navigator.clipboard.readText(),t=JSON.parse(e),n=(0,g.rf)(c,m);t&&k(t,n),console.log("[Paste]",t,n)}catch(e){console.log("[Paste]",e)}},[m,k]),A=(0,s.useCallback)(e=>{if(e.metaKey||e.ctrlKey&&!e.altKey){let t={KeyC:L,KeyV:O,KeyG:S}[e.code];t&&t()}else("Delete"===e.code||"Backspace"===e.code)&&m.getNodes().forEach(e=>e.selected&&E(e.id))},[m,L,O,S,E]);return(0,s.useEffect)(()=>(window.addEventListener("keydown",A),()=>{window.removeEventListener("keydown",A)}),[A]),(0,a.jsxs)(eD.x$,{nodes:p,edges:f,nodeTypes:l,ref:c,fitView:!0,snapGrid:[20,20],minZoom:.05,multiSelectionKeyCode:["Shift"],deleteKeyCode:[],disableKeyboardA11y:!0,onNodesChange:w,onEdgesChange:b,onEdgeUpdate:T,onEdgeUpdateStart:D,onEdgeUpdateEnd:_,onConnect:j,onNodeDragStart:R,onDrop:M,onDragOver:z,onInit:e=>{x(e),v()},children:[(0,a.jsx)(eZ,{variant:r.Dots}),(0,a.jsx)(eq,{showZoom:!1}),(0,a.jsx)(e4,{position:"bottom-left",nodeColor:e=>e.data.color||("light"===o?"#ECF0F1":"#2C3E50"),style:{width:150,height:100}})]})};function tt(){return(0,a.jsxs)("div",{className:"h-screen",children:[(0,a.jsx)(eD.tV,{children:(0,a.jsx)(j,{children:(0,a.jsx)(te,{})})}),(0,a.jsx)(eS,{})]})}},7333:function(){}},function(e){e.O(0,[310,780,387,14,971,69,744],function(){return e(e.s=4143)}),_N_E=e.O()}]);